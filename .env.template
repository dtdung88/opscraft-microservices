# ============================================================================
# OpsCraft Microservices - Environment Configuration Template
# Copy this file to .env and update with your values
# ============================================================================

# ============================================================================
# Security & Encryption
# ============================================================================
SECRET_KEY=your-super-secret-key-min-32-characters-long-change-this
ENCRYPTION_KEY=your-encryption-key-32-chars-long
ALGORITHM=HS256

# JWT Token Configuration
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# ============================================================================
# Database Configuration (PostgreSQL)
# ============================================================================
# Auth Service Database
AUTH_DATABASE_URL=postgresql://postgres:postgres@auth-db:5432/auth_db

# Script Service Database
SCRIPT_DATABASE_URL=postgresql://postgres:postgres@script-db:5432/script_db

# Execution Service Database
EXECUTION_DATABASE_URL=postgresql://postgres:postgres@execution-db:5432/execution_db

# Secret Service Database
SECRET_DATABASE_URL=postgresql://postgres:postgres@secret-db:5432/secret_db

# Database Connection Pool
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20

# ============================================================================
# Redis Configuration
# ============================================================================
REDIS_URL=redis://redis:6379
REDIS_TTL=3600

# ============================================================================
# Kafka Configuration
# ============================================================================
KAFKA_BOOTSTRAP_SERVERS=kafka:9092
KAFKA_TOPIC_USER_EVENTS=user-events
KAFKA_TOPIC_SCRIPT_EVENTS=script-events
KAFKA_TOPIC_EXECUTION_EVENTS=execution-events
KAFKA_TOPIC_SECRET_EVENTS=secret-events

# ============================================================================
# Celery Configuration (for Execution Service)
# ============================================================================
CELERY_BROKER_URL=redis://redis:6379/5
CELERY_RESULT_BACKEND=redis://redis:6379/6

# ============================================================================
# Service URLs (Internal Communication)
# ============================================================================
AUTH_SERVICE_URL=http://auth-service:8001
SCRIPT_SERVICE_URL=http://script-service:8002
EXECUTION_SERVICE_URL=http://execution-service:8003
SECRET_SERVICE_URL=http://secret-service:8004
NOTIFICATION_SERVICE_URL=http://notification-service:8005
ADMIN_SERVICE_URL=http://admin-service:8006

# ============================================================================
# CORS Configuration
# ============================================================================
CORS_ORIGINS=["http://localhost:3000","http://localhost:8000"]

# ============================================================================
# Service Discovery (Consul)
# ============================================================================
CONSUL_HOST=consul
CONSUL_PORT=8500

# ============================================================================
# Distributed Tracing (Jaeger)
# ============================================================================
JAEGER_HOST=jaeger
JAEGER_PORT=6831
JAEGER_ENABLED=true

# ============================================================================
# Monitoring & Observability
# ============================================================================
PROMETHEUS_ENABLED=true
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin

# ============================================================================
# ELK Stack Configuration
# ============================================================================
ELASTICSEARCH_URL=http://elasticsearch:9200
LOGSTASH_HOST=logstash
LOGSTASH_PORT=5000
KIBANA_URL=http://kibana:5601

# ============================================================================
# Docker Execution Configuration
# ============================================================================
DOCKER_ENABLED=true
MAX_CONCURRENT_EXECUTIONS=10
EXECUTION_TIMEOUT_SECONDS=3600

# Container Resource Limits
CONTAINER_MEMORY_LIMIT=512m
CONTAINER_CPU_QUOTA=50000
CONTAINER_CPU_PERIOD=100000

# ============================================================================
# Service-Specific Ports
# ============================================================================
AUTH_SERVICE_PORT=8001
SCRIPT_SERVICE_PORT=8002
EXECUTION_SERVICE_PORT=8003
SECRET_SERVICE_PORT=8004
NOTIFICATION_SERVICE_PORT=8005
ADMIN_SERVICE_PORT=8006
API_GATEWAY_PORT=8000
FRONTEND_PORT=3000

# ============================================================================
# Logging Configuration
# ============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json

# ============================================================================
# Feature Flags
# ============================================================================
ENABLE_RATE_LIMITING=true
ENABLE_METRICS=true
ENABLE_TRACING=true
ENABLE_AUDIT_LOGGING=true

# ============================================================================
# Email Configuration (Optional - for notifications)
# ============================================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@example.com
SMTP_PASSWORD=your-app-password
SMTP_FROM=noreply@opscraft.io

# ============================================================================
# Slack Integration (Optional - for notifications)
# ============================================================================
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
SLACK_ENABLED=false

# ============================================================================
# Vault Integration (Optional - for enhanced secret management)
# ============================================================================
VAULT_ENABLED=false
VAULT_URL=http://vault:8200
VAULT_TOKEN=your-vault-token

# ============================================================================
# Rate Limiting Configuration
# ============================================================================
RATE_LIMIT_GENERAL=60/m
RATE_LIMIT_AUTH=5/m
RATE_LIMIT_EXECUTION=20/m

# ============================================================================
# Script Validation
# ============================================================================
MAX_SCRIPT_SIZE=1000000
ENABLE_DANGEROUS_PATTERN_CHECK=true

# ============================================================================
# Development/Production Mode
# ============================================================================
ENVIRONMENT=development
DEBUG=true

# ============================================================================
# Frontend Configuration
# ============================================================================
REACT_APP_API_URL=http://localhost:8000/api/v1
REACT_APP_WS_URL=ws://localhost:8000/ws